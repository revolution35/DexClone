{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/nonIterableSpread.js","../node_modules/eth-block-tracker/src/base.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/superPropBase.js","../node_modules/json-rpc-random-id/index.js","../node_modules/safe-event-emitter/index.js","../../src/idRemapMiddleware.ts","../../src/createAsyncMiddleware.ts","../../src/createScaffoldMiddleware.ts","../../src/index.ts","../../src/errors.ts","../../src/mergeMiddleware.ts","../node_modules/eth-json-rpc-filters/node_modules/eth-json-rpc-middleware/node_modules/json-rpc-engine/src/createScaffoldMiddleware.js","../node_modules/eth-json-rpc-filters/log-filter.js","../node_modules/eth-json-rpc-filters/node_modules/pify/index.js","../node_modules/eth-json-rpc-filters/base-filter-history.js","../node_modules/eth-json-rpc-filters/block-filter.js","../node_modules/eth-json-rpc-filters/tx-filter.js","../node_modules/async-mutex/es6/Semaphore.js","../node_modules/async-mutex/es6/Mutex.js","../node_modules/async-mutex/es6/withTimeout.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/toConsumableArray.js","../node_modules/eth-json-rpc-filters/hexUtils.js","../node_modules/xtend/immutable.js","../index.ts","../../src/classes.ts","../../src/error-constants.ts","../node_modules/eth-json-rpc-filters/base-filter.js","../node_modules/eth-json-rpc-filters/getBlocksForRange.js","../node_modules/eth-block-tracker/src/polling.js","../node_modules/pify/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/get.js","../node_modules/eth-query/index.js","../node_modules/eth-json-rpc-filters/index.js","../../src/getUniqueId.ts","../../src/JsonRpcEngine.ts","../node_modules/fast-safe-stringify/index.js","../../src/utils.ts","../node_modules/eth-json-rpc-filters/node_modules/eth-json-rpc-middleware/scaffold.js","../node_modules/eth-json-rpc-filters/subscriptionManager.js"],"names":["arrayLikeToArray","module","exports","arr","Array","isArray","iter","Symbol","iterator","Object","from","TypeError","require","SafeEventEmitter","calculateSum","accumulator","currentValue","blockTrackerEvents","BaseBlockTracker","opts","_blockResetDuration","blockResetDuration","_blockResetTimeout","_currentBlock","_isRunning","_onNewListener","bind","_onRemoveListener","_resetCurrentBlock","_setupInternalEvents","this","Promise","resolve","once","latestBlock","eventName","removeListener","on","handler","includes","_maybeStart","_getBlockTrackerEventCount","_maybeEnd","_cancelBlockResetTimeout","_start","_setupBlockResetTimeout","_end","map","listenerCount","reduce","newBlock","currentBlock","hexToInt","_setCurrentBlock","oldBlock","emit","setTimeout","unref","clearTimeout","hexInt","Number","parseInt","getPrototypeOf","object","property","prototype","hasOwnProperty","call","max","MAX_SAFE_INTEGER","idCounter","start","Math","floor","random","util","EventEmitter","R","Reflect","ReflectApply","apply","target","receiver","args","Function","safeApply","context","err","arrayClone","n","copy","i","inherits","type","arguments","length","push","doError","events","_events","undefined","error","er","Error","message","len","listeners","req","res","next","originalId","id","newId","getUniqueId_1","done","asyncMiddleware","end","nextPromise","resolveNextPromise","returnHandlerCallback","nextWasCalled","asyncNext","runReturnHandlersCallback","handlers","method","result","enumerable","get","classes_1","utils_1","errors_1","error_constants_1","getEthJsonRpcError","code","arg","parseOpts","data","getEthProviderError","rpc","parse","invalidRequest","invalidParams","methodNotFound","internal","server","isInteger","invalidInput","resourceNotFound","resourceUnavailable","transactionRejected","methodNotSupported","limitExceeded","provider","userRejectedRequest","unauthorized","unsupportedMethod","disconnected","chainDisconnected","custom","middlewareStack","engine","JsonRpcEngine_1","forEach","middleware","asMiddleware","EthQuery","pify","BaseFilterWithHistory","bnToHex","incrementHexInt","minBlockRef","blockRefIsNumber","LogFilter","params","ethQuery","assign","fromBlock","toBlock","address","topics","toLowerCase","_fetchLogs","newLogs","addInitialResults","matchingLogs","filter","log","matchLog","addResults","cb","getLogs","blockNumber","normalizedLogAddress","every","topicPattern","index","logTopic","subtopicsToMatch","topic","processFn","fn","options","proxy","unwrapped","arguments_","P","promiseModule","reject","multiArgs","errorFirst","shift","self","filterCache","WeakMap","input","exclude","objectType","cache","Proxy","thisArg","cached","pified","excludeMain","set","key","match","pattern","test","desc","getOwnPropertyDescriptor","writableOrConfigurableOwn","writable","configurable","shouldFilter","include","some","allResults","newResults","concat","BaseFilter","getBlocksForRange","BlockFilter","blockBodies","blockHashes","block","hash","TxFilter","blocks","blockTxHashes","transactions","Semaphore","_maxConcurrency","_queue","_value","acquire","_this","locked","isLocked","ticket","r","_dispatch","runExclusive","callback","__awaiter","_a","value","release","__generator","_b","label","sent","trys","_currentReleaser","releaser","nextConsumer","released","Mutex","_semaphore","withTimeout","sync","timeout","timeoutError","isTimeout","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","sortBlockRefs","refs","sort","refA","refB","hexString","intToHex","int","toString","unsafeRandomNibble","sortedRefs","maxBlockRef","bn","blockRef","unsafeRandomBytes","byteCount","source","events_1","EthereumRpcError","serialized","stack","fast_safe_stringify_1","serialize","stringifyReplacer","EthereumProviderError","isValidEthProviderCode","_","standard","updates","default","fromBlockNumber","toBlockNumber","missingBlockNumbers","fill","all","blockNum","query","sendAsync","jsonrpc","PollingBlockTracker","pollingInterval","retryTimeout","keepEventLoopActive","setSkipCacheFlag","_provider","_pollingInterval","_retryTimeout","_keepEventLoopActive","_setSkipCacheFlag","_updateLatestBlock","getLatestBlock","_performSync","catch","newErr","emitErr","console","_fetchLatestBlock","_newPotentialLatest","skipCache","duration","timoutRef","results","unshift","obj","ret","create","x","superPropBase","_get","base","extend","createRandomId","currentProvider","generateFnFor","methodName","slice","pop","generateFnWithDefaultBlockFor","argCount","getBalance","getCode","getTransactionCount","getStorageAt","protocolVersion","syncing","coinbase","mining","hashrate","gasPrice","accounts","getBlockTransactionCountByHash","getBlockTransactionCountByNumber","getUncleCountByBlockHash","getUncleCountByBlockNumber","sign","sendTransaction","sendRawTransaction","estimateGas","getBlockByHash","getBlockByNumber","getTransactionByHash","getTransactionByBlockHashAndIndex","getTransactionByBlockNumberAndIndex","getTransactionReceipt","getUncleByBlockHashAndIndex","getUncleByBlockNumberAndIndex","getCompilers","compileLLL","compileSolidity","compileSerpent","newFilter","newBlockFilter","newPendingTransactionFilter","uninstallFilter","getFilterChanges","getFilterLogs","getWork","submitWork","submitHashrate","response","createAsyncMiddleware","createJsonRpcMiddleware","toFilterCreationMiddleware","createFilterFn","toAsyncRpcMiddleware","asyncFn","objValues","values","blockTracker","filterIndex","filters","mutex","waitForFree","releaseLock","mutexMiddlewareWrapper","eth_newFilter","newLogFilter","eth_newBlockFilter","eth_newPendingTransactionFilter","eth_uninstallFilter","uninstallFilterHandler","eth_getFilterChanges","eth_getFilterLogs","filterUpdater","update","destroy","uninstallAllFilters","installFilter","filterIndexHex","getChangesAndClear","getAllResults","Boolean","prevFilterCount","initialize","idHex","newFilterCount","updateBlockTrackerSubs","__exportStar","JsonRpcEngine","_middleware","_handleBatch","_handle","_promiseHandle","_runAllMiddleware","middlewareError","isComplete","returnHandlers","_runReturnHandlers","handlerCallback","reqs","responses","_err","callerReq","eth_rpc_errors_1","request","_processRequest","_checkForCompletion","_runMiddleware","reverse","returnHandler","jsonify","safe_event_emitter_1","JSON","stringify","stable","deterministicStringify","stableStringify","replacerStack","defaultOptions","depthLimit","edgesLimit","replacer","spacer","decirc","val","k","edgeIndex","parent","depth","setReplace","keys","replaceGetterValues","part","defineProperty","replace","propertyDescriptor","compareFunction","a","b","tmp","deterministicDecirc","toJSON","v","splice","FALLBACK_ERROR_CODE","FALLBACK_MESSAGE","FALLBACK_ERROR","getMessageFromCode","fallbackMessage","codeString","hasKey","isJsonRpcServerError","isValidCode","assignOriginalError","fallbackError","shouldIncludeStack","_error","originalError","createScaffoldMiddleware","createFilterMiddleware","normalizeBlock","parentHash","sha3Uncles","miner","stateRoot","transactionsRoot","receiptsRoot","logsBloom","difficulty","number","gasLimit","gasUsed","nonce","mixHash","timestamp","extraData","subscriptions","filterManager","isDestroyed","eth_subscribe","eth_unsubscribe","removeAllListeners","createSubNewHeads","createSubFromFilter","subId","_emitSubscriptionResult","subscriptionType","sub","rawBlocks","filterParams","subscription","filterIdHex"],"mappings":"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","file":"static/js/0.f977e521.chunk.js","sourcesContent":["var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;","const EthQuery = require('eth-query')\nconst pify = require('pify')\nconst SafeEventEmitter = require('safe-event-emitter')\n\nconst sec = 1000\n\nconst calculateSum = (accumulator, currentValue) => accumulator + currentValue\nconst blockTrackerEvents = ['sync', 'latest']\n\nclass BaseBlockTracker extends SafeEventEmitter {\n\n  //\n  // public\n  //\n\n  constructor (opts = {}) {\n    super()\n    // config\n    this._blockResetDuration = opts.blockResetDuration || 20 * sec\n    // state\n    this._blockResetTimeout\n    this._currentBlock = null\n    this._isRunning = false\n    // bind functions for internal use\n    this._onNewListener = this._onNewListener.bind(this)\n    this._onRemoveListener = this._onRemoveListener.bind(this)\n    this._resetCurrentBlock = this._resetCurrentBlock.bind(this)\n    // listen for handler changes\n    this._setupInternalEvents()\n  }\n\n  isRunning () {\n    return this._isRunning\n  }\n\n  getCurrentBlock () {\n    return this._currentBlock\n  }\n\n  async getLatestBlock () {\n    // return if available\n    if (this._currentBlock) return this._currentBlock\n    // wait for a new latest block\n    const latestBlock = await new Promise(resolve => this.once('latest', resolve))\n    // return newly set current block\n    return latestBlock\n  }\n\n  // dont allow module consumer to remove our internal event listeners\n  removeAllListeners (eventName) {\n    // perform default behavior, preserve fn arity\n    if (eventName) {\n      super.removeAllListeners(eventName)\n    } else {\n      super.removeAllListeners()\n    }\n    // re-add internal events\n    this._setupInternalEvents()\n    // trigger stop check just in case\n    this._onRemoveListener()\n  }\n\n  //\n  // to be implemented in subclass\n  //\n\n  _start () {\n    // default behavior is noop\n  }\n\n  _end () {\n    // default behavior is noop\n  }\n\n  //\n  // private\n  //\n\n  _setupInternalEvents () {\n    // first remove listeners for idempotence\n    this.removeListener('newListener', this._onNewListener)\n    this.removeListener('removeListener', this._onRemoveListener)\n    // then add them\n    this.on('newListener', this._onNewListener)\n    this.on('removeListener', this._onRemoveListener)\n  }\n\n  _onNewListener (eventName, handler) {\n    // `newListener` is called *before* the listener is added\n    if (!blockTrackerEvents.includes(eventName)) return\n    this._maybeStart()\n  }\n\n  _onRemoveListener (eventName, handler) {\n    // `removeListener` is called *after* the listener is removed\n    if (this._getBlockTrackerEventCount() > 0) return\n    this._maybeEnd()\n  }\n\n  _maybeStart () {\n    if (this._isRunning) return\n    this._isRunning = true\n    // cancel setting latest block to stale\n    this._cancelBlockResetTimeout()\n    this._start()\n  }\n\n  _maybeEnd () {\n    if (!this._isRunning) return\n    this._isRunning = false\n    this._setupBlockResetTimeout()\n    this._end()\n  }\n\n  _getBlockTrackerEventCount () {\n    return blockTrackerEvents\n      .map(eventName => this.listenerCount(eventName))\n      .reduce(calculateSum)\n  }\n\n  _newPotentialLatest (newBlock) {\n    const currentBlock = this._currentBlock\n    // only update if blok number is higher\n    if (currentBlock && (hexToInt(newBlock) <= hexToInt(currentBlock))) return\n    this._setCurrentBlock(newBlock)\n  }\n\n  _setCurrentBlock (newBlock) {\n    const oldBlock = this._currentBlock\n    this._currentBlock = newBlock\n    this.emit('latest', newBlock)\n    this.emit('sync', { oldBlock, newBlock })\n  }\n\n  _setupBlockResetTimeout () {\n    // clear any existing timeout\n    this._cancelBlockResetTimeout()\n    // clear latest block when stale\n    this._blockResetTimeout = setTimeout(this._resetCurrentBlock, this._blockResetDuration)\n    // nodejs - dont hold process open\n    if (this._blockResetTimeout.unref) {\n      this._blockResetTimeout.unref()\n    }\n  }\n\n  _cancelBlockResetTimeout () {\n    clearTimeout(this._blockResetTimeout)\n  }\n\n  _resetCurrentBlock () {\n    this._currentBlock = null\n  }\n\n}\n\nmodule.exports = BaseBlockTracker\n\nfunction hexToInt(hexInt) {\n  return Number.parseInt(hexInt, 16)\n}\n","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","module.exports = IdIterator\n\nfunction IdIterator(opts){\n  opts = opts || {}\n  var max = opts.max || Number.MAX_SAFE_INTEGER\n  var idCounter = typeof opts.start !== 'undefined' ? opts.start : Math.floor(Math.random() * max)\n\n  return function createRandomId () {\n    idCounter = idCounter % max\n    return idCounter++\n  }\n\n}","const util = require('util')\nconst EventEmitter = require('events/')\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n}\n\nmodule.exports = SafeEventEmitter\n\n\nfunction SafeEventEmitter() {\n  EventEmitter.call(this)\n}\n\nutil.inherits(SafeEventEmitter, EventEmitter)\n\nSafeEventEmitter.prototype.emit = function (type) {\n  // copied from https://github.com/Gozala/events/blob/master/events.js\n  // modified lines are commented with \"edited:\"\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    // edited: using safeApply\n    safeApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      // edited: using safeApply\n      safeApply(listeners[i], this, args);\n  }\n\n  return true;\n}\n\nfunction safeApply(handler, context, args) {\n  try {\n    ReflectApply(handler, context, args)\n  } catch (err) {\n    // throw error after timeout so as not to interupt the stack\n    setTimeout(() => {\n      throw err\n    })\n  }\n}\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n",null,null,null,null,null,null,"module.exports = function createScaffoldMiddleware (handlers) {\n  return (req, res, next, end) => {\n    const handler = handlers[req.method]\n    // if no handler, return\n    if (handler === undefined) {\n      return next()\n    }\n    // if handler is fn, call as middleware\n    if (typeof handler === 'function') {\n      return handler(req, res, next, end)\n    }\n    // if handler is some other value, use as result\n    res.result = handler\n    return end()\n  }\n}\n","const EthQuery = require('eth-query')\nconst pify = require('pify')\nconst BaseFilterWithHistory = require('./base-filter-history')\nconst { bnToHex, hexToInt, incrementHexInt, minBlockRef, blockRefIsNumber } = require('./hexUtils')\n\nclass LogFilter extends BaseFilterWithHistory {\n\n  constructor ({ provider, params }) {\n    super()\n    this.type = 'log'\n    this.ethQuery = new EthQuery(provider)\n    this.params = Object.assign({\n      fromBlock: 'latest',\n      toBlock: 'latest',\n      address: undefined,\n      topics: [],\n    }, params)\n    // normalize address parameter\n    if (this.params.address) {\n      // ensure array\n      if (!Array.isArray(this.params.address)) {\n        this.params.address = [this.params.address]\n      }\n      // ensure lowercase\n      this.params.address = this.params.address.map(address => address.toLowerCase())\n    }\n  }\n\n  async initialize({ currentBlock }) {\n    // resolve params.fromBlock\n    let fromBlock = this.params.fromBlock\n    if (['latest', 'pending'].includes(fromBlock)) fromBlock = currentBlock\n    if ('earliest' === fromBlock) fromBlock = '0x0'\n    this.params.fromBlock = fromBlock\n    // set toBlock for initial lookup\n    const toBlock = minBlockRef(this.params.toBlock, currentBlock)\n    const params = Object.assign({}, this.params, { toBlock })\n    // fetch logs and add to results\n    const newLogs = await this._fetchLogs(params)\n    this.addInitialResults(newLogs)\n  }\n\n  async update ({ oldBlock, newBlock }) {\n    // configure params for this update\n    const toBlock = newBlock\n    let fromBlock\n    // oldBlock is empty on first sync\n    if (oldBlock) {\n      fromBlock = incrementHexInt(oldBlock)\n    } else {\n      fromBlock = newBlock\n    }\n    // fetch logs\n    const params = Object.assign({}, this.params, { fromBlock, toBlock })\n    const newLogs = await this._fetchLogs(params)\n    const matchingLogs = newLogs.filter(log => this.matchLog(log))\n\n    // add to results\n    this.addResults(matchingLogs)\n  }\n\n  async _fetchLogs (params) {\n    const newLogs = await pify(cb => this.ethQuery.getLogs(params, cb))()\n    // add to results\n    return newLogs\n  }\n\n  matchLog(log) {\n    // check if block number in bounds:\n    if (hexToInt(this.params.fromBlock) >= hexToInt(log.blockNumber)) return false\n    if (blockRefIsNumber(this.params.toBlock) && hexToInt(this.params.toBlock) <= hexToInt(log.blockNumber)) return false\n\n    // address is correct:\n    const normalizedLogAddress = log.address && log.address.toLowerCase()\n    if (this.params.address && normalizedLogAddress && !this.params.address.includes(normalizedLogAddress)) return false\n\n    // topics match:\n    // topics are position-dependant\n    // topics can be nested to represent `or` [[a || b], c]\n    // topics can be null, representing a wild card for that position\n    const topicsMatch = this.params.topics.every((topicPattern, index) => {\n      // pattern is longer than actual topics\n      let logTopic = log.topics[index]\n      if (!logTopic) return false\n      logTopic = logTopic.toLowerCase()\n      // normalize subTopics\n      let subtopicsToMatch = Array.isArray(topicPattern) ? topicPattern : [topicPattern]\n      // check for wild card\n      const subtopicsIncludeWildcard = subtopicsToMatch.includes(null)\n      if (subtopicsIncludeWildcard) return true\n      subtopicsToMatch = subtopicsToMatch.map(topic => topic.toLowerCase())\n      // check each possible matching topic\n      const topicDoesMatch = subtopicsToMatch.includes(logTopic)\n      return topicDoesMatch\n    })\n\n    return topicsMatch\n  }\n\n}\n\nmodule.exports = LogFilter\n","'use strict';\n\nconst processFn = (fn, options, proxy, unwrapped) => function (...arguments_) {\n\tconst P = options.promiseModule;\n\n\treturn new P((resolve, reject) => {\n\t\tif (options.multiArgs) {\n\t\t\targuments_.push((...result) => {\n\t\t\t\tif (options.errorFirst) {\n\t\t\t\t\tif (result[0]) {\n\t\t\t\t\t\treject(result);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.shift();\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (options.errorFirst) {\n\t\t\targuments_.push((error, result) => {\n\t\t\t\tif (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\targuments_.push(resolve);\n\t\t}\n\n\t\tconst self = this === proxy ? unwrapped : this;\n\t\tReflect.apply(fn, self, arguments_);\n\t});\n};\n\nconst filterCache = new WeakMap();\n\nmodule.exports = (input, options) => {\n\toptions = {\n\t\texclude: [/.+(?:Sync|Stream)$/],\n\t\terrorFirst: true,\n\t\tpromiseModule: Promise,\n\t\t...options\n\t};\n\n\tconst objectType = typeof input;\n\tif (!(input !== null && (objectType === 'object' || objectType === 'function'))) {\n\t\tthrow new TypeError(`Expected \\`input\\` to be a \\`Function\\` or \\`Object\\`, got \\`${input === null ? 'null' : objectType}\\``);\n\t}\n\n\tconst filter = (target, key) => {\n\t\tlet cached = filterCache.get(target);\n\n\t\tif (!cached) {\n\t\t\tcached = {};\n\t\t\tfilterCache.set(target, cached);\n\t\t}\n\n\t\tif (key in cached) {\n\t\t\treturn cached[key];\n\t\t}\n\n\t\tconst match = pattern => (typeof pattern === 'string' || typeof key === 'symbol') ? key === pattern : pattern.test(key);\n\t\tconst desc = Reflect.getOwnPropertyDescriptor(target, key);\n\t\tconst writableOrConfigurableOwn = (desc === undefined || desc.writable || desc.configurable);\n\t\tconst included = options.include ? options.include.some(match) : !options.exclude.some(match);\n\t\tconst shouldFilter = included && writableOrConfigurableOwn;\n\t\tcached[key] = shouldFilter;\n\t\treturn shouldFilter;\n\t};\n\n\tconst cache = new WeakMap();\n\n\tconst proxy = new Proxy(input, {\n\t\tapply(target, thisArg, args) {\n\t\t\tconst cached = cache.get(target);\n\n\t\t\tif (cached) {\n\t\t\t\treturn Reflect.apply(cached, thisArg, args);\n\t\t\t}\n\n\t\t\tconst pified = options.excludeMain ? target : processFn(target, options, proxy, target);\n\t\t\tcache.set(target, pified);\n\t\t\treturn Reflect.apply(pified, thisArg, args);\n\t\t},\n\n\t\tget(target, key) {\n\t\t\tconst property = target[key];\n\n\t\t\t// eslint-disable-next-line no-use-extend-native/no-use-extend-native\n\t\t\tif (!filter(target, key) || property === Function.prototype[key]) {\n\t\t\t\treturn property;\n\t\t\t}\n\n\t\t\tconst cached = cache.get(property);\n\n\t\t\tif (cached) {\n\t\t\t\treturn cached;\n\t\t\t}\n\n\t\t\tif (typeof property === 'function') {\n\t\t\t\tconst pified = processFn(property, options, proxy, target);\n\t\t\t\tcache.set(property, pified);\n\t\t\t\treturn pified;\n\t\t\t}\n\n\t\t\treturn property;\n\t\t}\n\t});\n\n\treturn proxy;\n};\n","const BaseFilter = require('./base-filter')\n\n// tracks all results ever recorded\nclass BaseFilterWithHistory extends BaseFilter {\n\n  constructor () {\n    super()\n    this.allResults = []\n  }\n\n  async update () {\n    throw new Error('BaseFilterWithHistory - no update method specified')\n  }\n\n  addResults (newResults) {\n    this.allResults = this.allResults.concat(newResults)\n    super.addResults(newResults)\n  }\n\n  addInitialResults (newResults) {\n    this.allResults = this.allResults.concat(newResults)\n    super.addInitialResults(newResults)\n  }\n\n  getAllResults () {\n    return this.allResults\n  }\n\n}\n\nmodule.exports = BaseFilterWithHistory","const BaseFilter = require('./base-filter')\nconst getBlocksForRange = require('./getBlocksForRange')\nconst { incrementHexInt } = require('./hexUtils')\n\nclass BlockFilter extends BaseFilter {\n\n  constructor ({ provider, params }) {\n    super()\n    this.type = 'block'\n    this.provider = provider\n  }\n\n  async update ({ oldBlock, newBlock }) {\n    const toBlock = newBlock\n    const fromBlock = incrementHexInt(oldBlock)\n    const blockBodies = await getBlocksForRange({ provider: this.provider, fromBlock, toBlock })\n    const blockHashes = blockBodies.map((block) => block.hash)\n    this.addResults(blockHashes)\n  }\n\n}\n\nmodule.exports = BlockFilter\n","const BaseFilter = require('./base-filter')\nconst getBlocksForRange = require('./getBlocksForRange')\nconst { incrementHexInt } = require('./hexUtils')\n\nclass TxFilter extends BaseFilter {\n\n  constructor ({ provider }) {\n    super()\n    this.type = 'tx'\n    this.provider = provider\n  }\n\n  async update ({ oldBlock }) {\n    const toBlock = oldBlock\n    const fromBlock = incrementHexInt(oldBlock)\n    const blocks = await getBlocksForRange({ provider: this.provider, fromBlock, toBlock })\n    const blockTxHashes = []\n    for (const block of blocks) {\n      blockTxHashes.push(...block.transactions)\n    }\n    // add to results\n    this.addResults(blockTxHashes)\n  }\n\n}\n\nmodule.exports = TxFilter\n","import { __awaiter, __generator } from \"tslib\";\nvar Semaphore = /** @class */ (function () {\n    function Semaphore(_maxConcurrency) {\n        this._maxConcurrency = _maxConcurrency;\n        this._queue = [];\n        if (_maxConcurrency <= 0) {\n            throw new Error('semaphore must be initialized to a positive value');\n        }\n        this._value = _maxConcurrency;\n    }\n    Semaphore.prototype.acquire = function () {\n        var _this = this;\n        var locked = this.isLocked();\n        var ticket = new Promise(function (r) { return _this._queue.push(r); });\n        if (!locked)\n            this._dispatch();\n        return ticket;\n    };\n    Semaphore.prototype.runExclusive = function (callback) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, value, release;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.acquire()];\n                    case 1:\n                        _a = _b.sent(), value = _a[0], release = _a[1];\n                        _b.label = 2;\n                    case 2:\n                        _b.trys.push([2, , 4, 5]);\n                        return [4 /*yield*/, callback(value)];\n                    case 3: return [2 /*return*/, _b.sent()];\n                    case 4:\n                        release();\n                        return [7 /*endfinally*/];\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Semaphore.prototype.isLocked = function () {\n        return this._value <= 0;\n    };\n    Semaphore.prototype.release = function () {\n        if (this._maxConcurrency > 1) {\n            throw new Error('this method is unavailabel on semaphores with concurrency > 1; use the scoped release returned by acquire instead');\n        }\n        if (this._currentReleaser) {\n            var releaser = this._currentReleaser;\n            this._currentReleaser = undefined;\n            releaser();\n        }\n    };\n    Semaphore.prototype._dispatch = function () {\n        var _this = this;\n        var nextConsumer = this._queue.shift();\n        if (!nextConsumer)\n            return;\n        var released = false;\n        this._currentReleaser = function () {\n            if (released)\n                return;\n            released = true;\n            _this._value++;\n            _this._dispatch();\n        };\n        nextConsumer([this._value--, this._currentReleaser]);\n    };\n    return Semaphore;\n}());\nexport default Semaphore;\n","import { __awaiter, __generator } from \"tslib\";\nimport Semaphore from './Semaphore';\nvar Mutex = /** @class */ (function () {\n    function Mutex() {\n        this._semaphore = new Semaphore(1);\n    }\n    Mutex.prototype.acquire = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, releaser;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this._semaphore.acquire()];\n                    case 1:\n                        _a = _b.sent(), releaser = _a[1];\n                        return [2 /*return*/, releaser];\n                }\n            });\n        });\n    };\n    Mutex.prototype.runExclusive = function (callback) {\n        return this._semaphore.runExclusive(function () { return callback(); });\n    };\n    Mutex.prototype.isLocked = function () {\n        return this._semaphore.isLocked();\n    };\n    Mutex.prototype.release = function () {\n        this._semaphore.release();\n    };\n    return Mutex;\n}());\nexport default Mutex;\n","import { __awaiter, __generator } from \"tslib\";\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function withTimeout(sync, timeout, timeoutError) {\n    var _this = this;\n    if (timeoutError === void 0) { timeoutError = new Error('timeout'); }\n    return {\n        acquire: function () {\n            return new Promise(function (resolve, reject) { return __awaiter(_this, void 0, void 0, function () {\n                var isTimeout, ticket, release;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            isTimeout = false;\n                            setTimeout(function () {\n                                isTimeout = true;\n                                reject(timeoutError);\n                            }, timeout);\n                            return [4 /*yield*/, sync.acquire()];\n                        case 1:\n                            ticket = _a.sent();\n                            if (isTimeout) {\n                                release = Array.isArray(ticket) ? ticket[1] : ticket;\n                                release();\n                            }\n                            else {\n                                resolve(ticket);\n                            }\n                            return [2 /*return*/];\n                    }\n                });\n            }); });\n        },\n        runExclusive: function (callback) {\n            return __awaiter(this, void 0, void 0, function () {\n                var release, ticket;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            release = function () { return undefined; };\n                            _a.label = 1;\n                        case 1:\n                            _a.trys.push([1, , 7, 8]);\n                            return [4 /*yield*/, this.acquire()];\n                        case 2:\n                            ticket = _a.sent();\n                            if (!Array.isArray(ticket)) return [3 /*break*/, 4];\n                            release = ticket[1];\n                            return [4 /*yield*/, callback(ticket[0])];\n                        case 3: return [2 /*return*/, _a.sent()];\n                        case 4:\n                            release = ticket;\n                            return [4 /*yield*/, callback()];\n                        case 5: return [2 /*return*/, _a.sent()];\n                        case 6: return [3 /*break*/, 8];\n                        case 7:\n                            release();\n                            return [7 /*endfinally*/];\n                        case 8: return [2 /*return*/];\n                    }\n                });\n            });\n        },\n        release: function () {\n            sync.release();\n        },\n        isLocked: function () { return sync.isLocked(); },\n    };\n}\n","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","\nmodule.exports = {\n  minBlockRef,\n  maxBlockRef,\n  sortBlockRefs,\n  bnToHex,\n  blockRefIsNumber,\n  hexToInt,\n  incrementHexInt,\n  intToHex,\n  unsafeRandomBytes,\n}\n\nfunction minBlockRef(...refs) {\n  const sortedRefs = sortBlockRefs(refs)\n  return sortedRefs[0]\n}\n\nfunction maxBlockRef(...refs) {\n  const sortedRefs = sortBlockRefs(refs)\n  return sortedRefs[sortedRefs.length-1]\n}\n\nfunction sortBlockRefs(refs) {\n  return refs.sort((refA, refB) => {\n    if (refA === 'latest' || refB === 'earliest') return 1\n    if (refB === 'latest' || refA === 'earliest') return -1\n    return hexToInt(refA) - hexToInt(refB)\n  })\n}\n\nfunction bnToHex(bn) {\n  return '0x' + bn.toString(16)\n}\n\nfunction blockRefIsNumber(blockRef){\n  return blockRef && !['earliest', 'latest', 'pending'].includes(blockRef)\n}\n\nfunction hexToInt(hexString) {\n  if (hexString === undefined || hexString === null) return hexString\n  return Number.parseInt(hexString, 16)\n}\n\nfunction incrementHexInt(hexString){\n  if (hexString === undefined || hexString === null) return hexString\n  const value = hexToInt(hexString)\n  return intToHex(value + 1)\n}\n\nfunction intToHex(int) {\n  if (int === undefined || int === null) return int\n  let hexString = int.toString(16)\n  const needsLeftPad = hexString.length % 2\n  if (needsLeftPad) hexString = '0' + hexString\n  return '0x' + hexString\n}\n\nfunction unsafeRandomBytes(byteCount) {\n  let result = '0x'\n  for (let i = 0; i < byteCount; i++) {\n    result += unsafeRandomNibble()\n    result += unsafeRandomNibble()\n  }\n  return result\n}\n\nfunction unsafeRandomNibble() {\n  return Math.floor(Math.random() * 16).toString(16)\n}\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n",null,null,null,"const SafeEventEmitter = require('@metamask/safe-event-emitter').default\n\nclass BaseFilter extends SafeEventEmitter {\n\n  constructor () {\n    super()\n    this.updates = []\n  }\n\n  async initialize () {}\n\n  async update () {\n    throw new Error('BaseFilter - no update method specified')\n  }\n\n  addResults (newResults) {\n    this.updates = this.updates.concat(newResults)\n    newResults.forEach(result => this.emit('update', result))\n  }\n\n  addInitialResults (newResults) {}\n\n  getChangesAndClear () {\n    const updates = this.updates\n    this.updates = []\n    return updates\n  }\n  \n}\n\nmodule.exports = BaseFilter\n","module.exports = getBlocksForRange\n\nasync function getBlocksForRange({ provider, fromBlock, toBlock }) {\n  if (!fromBlock) fromBlock = toBlock\n\n  const fromBlockNumber = hexToInt(fromBlock)\n  const toBlockNumber = hexToInt(toBlock)\n  const blockCountToQuery = toBlockNumber - fromBlockNumber + 1\n  // load all blocks from old to new (inclusive)\n  const missingBlockNumbers = Array(blockCountToQuery).fill()\n                              .map((_,index) => fromBlockNumber + index)\n                              .map(intToHex)\n  const blockBodies = await Promise.all(\n    missingBlockNumbers.map(blockNum => query(provider, 'eth_getBlockByNumber', [blockNum, false]))\n  )\n  return blockBodies\n}\n\nfunction hexToInt(hexString) {\n  if (hexString === undefined || hexString === null) return hexString\n  return Number.parseInt(hexString, 16)\n}\n\nfunction incrementHexInt(hexString){\n  if (hexString === undefined || hexString === null) return hexString\n  const value = hexToInt(hexString)\n  return intToHex(value + 1)\n}\n\nfunction intToHex(int) {\n  if (int === undefined || int === null) return int\n  const hexString = int.toString(16)\n  return '0x' + hexString\n}\n\nfunction query(provider, method, params) {\n  return new Promise((resolve, reject) => {\n    provider.sendAsync({ id: 1, jsonrpc: '2.0', method, params }, (err, res) => {\n      if (err) return reject(err)\n      resolve(res.result)\n    })\n  })\n}\n","const pify = require('pify')\nconst BaseBlockTracker = require('./base')\n\nconst sec = 1000\n\nclass PollingBlockTracker extends BaseBlockTracker {\n\n  constructor (opts = {}) {\n    // parse + validate args\n    if (!opts.provider) throw new Error('PollingBlockTracker - no provider specified.')\n    const pollingInterval = opts.pollingInterval || 20 * sec\n    const retryTimeout = opts.retryTimeout || pollingInterval / 10\n    const keepEventLoopActive = opts.keepEventLoopActive !== undefined ? opts.keepEventLoopActive : true\n    const setSkipCacheFlag = opts.setSkipCacheFlag || false\n    // BaseBlockTracker constructor\n    super(Object.assign({\n      blockResetDuration: pollingInterval,\n    }, opts))\n    // config\n    this._provider = opts.provider\n    this._pollingInterval = pollingInterval\n    this._retryTimeout = retryTimeout\n    this._keepEventLoopActive = keepEventLoopActive\n    this._setSkipCacheFlag = setSkipCacheFlag\n  }\n\n  //\n  // public\n  //\n\n  // trigger block polling\n  async checkForLatestBlock () {\n    await this._updateLatestBlock()\n    return await this.getLatestBlock()\n  }\n\n  //\n  // private\n  //\n\n  _start () {\n    this._performSync().catch(err => this.emit('error', err))\n  }\n\n  async _performSync () {\n    while (this._isRunning) {\n      try {\n        await this._updateLatestBlock()\n        await timeout(this._pollingInterval, !this._keepEventLoopActive)\n      } catch (err) {\n        const newErr = new Error(`PollingBlockTracker - encountered an error while attempting to update latest block:\\n${err.stack}`)\n        try {\n          this.emit('error', newErr)\n        } catch (emitErr) {\n          console.error(newErr)\n        }\n        await timeout(this._retryTimeout, !this._keepEventLoopActive)\n      }\n    }\n  }\n\n  async _updateLatestBlock () {\n    // fetch + set latest block\n    const latestBlock = await this._fetchLatestBlock()\n    this._newPotentialLatest(latestBlock)\n  }\n\n  async _fetchLatestBlock () {\n    const req = { jsonrpc: \"2.0\", id: 1, method: 'eth_blockNumber', params: [] }\n    if (this._setSkipCacheFlag) req.skipCache = true\n    const res = await pify((cb) => this._provider.sendAsync(req, cb))()\n    if (res.error) throw new Error(`PollingBlockTracker - encountered error fetching block:\\n${res.error}`)\n    return res.result\n  }\n\n}\n\nmodule.exports = PollingBlockTracker\n\nfunction timeout (duration, unref) {\n  return new Promise(resolve => {\n    const timoutRef = setTimeout(resolve, duration)\n    // don't keep process open\n    if (timoutRef.unref && unref) {\n      timoutRef.unref()\n    }\n  })\n}\n","'use strict';\n\nconst processFn = (fn, opts) => function () {\n\tconst P = opts.promiseModule;\n\tconst args = new Array(arguments.length);\n\n\tfor (let i = 0; i < arguments.length; i++) {\n\t\targs[i] = arguments[i];\n\t}\n\n\treturn new P((resolve, reject) => {\n\t\tif (opts.errorFirst) {\n\t\t\targs.push(function (err, result) {\n\t\t\t\tif (opts.multiArgs) {\n\t\t\t\t\tconst results = new Array(arguments.length - 1);\n\n\t\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\n\t\t\t\t\t\tresults[i - 1] = arguments[i];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tresults.unshift(err);\n\t\t\t\t\t\treject(results);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(results);\n\t\t\t\t\t}\n\t\t\t\t} else if (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\targs.push(function (result) {\n\t\t\t\tif (opts.multiArgs) {\n\t\t\t\t\tconst results = new Array(arguments.length - 1);\n\n\t\t\t\t\tfor (let i = 0; i < arguments.length; i++) {\n\t\t\t\t\t\tresults[i] = arguments[i];\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve(results);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfn.apply(this, args);\n\t});\n};\n\nmodule.exports = (obj, opts) => {\n\topts = Object.assign({\n\t\texclude: [/.+(Sync|Stream)$/],\n\t\terrorFirst: true,\n\t\tpromiseModule: Promise\n\t}, opts);\n\n\tconst filter = key => {\n\t\tconst match = pattern => typeof pattern === 'string' ? key === pattern : pattern.test(key);\n\t\treturn opts.include ? opts.include.some(match) : !opts.exclude.some(match);\n\t};\n\n\tlet ret;\n\tif (typeof obj === 'function') {\n\t\tret = function () {\n\t\t\tif (opts.excludeMain) {\n\t\t\t\treturn obj.apply(this, arguments);\n\t\t\t}\n\n\t\t\treturn processFn(obj, opts).apply(this, arguments);\n\t\t};\n\t} else {\n\t\tret = Object.create(Object.getPrototypeOf(obj));\n\t}\n\n\tfor (const key in obj) { // eslint-disable-line guard-for-in\n\t\tconst x = obj[key];\n\t\tret[key] = typeof x === 'function' && filter(key) ? processFn(x, opts) : x;\n\t}\n\n\treturn ret;\n};\n","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","const extend = require('xtend')\nconst createRandomId = require('json-rpc-random-id')()\n\nmodule.exports = EthQuery\n\n\nfunction EthQuery(provider){\n  const self = this\n  self.currentProvider = provider\n}\n\n//\n// base queries\n//\n\n// default block\nEthQuery.prototype.getBalance =                          generateFnWithDefaultBlockFor(2, 'eth_getBalance')\nEthQuery.prototype.getCode =                             generateFnWithDefaultBlockFor(2, 'eth_getCode')\nEthQuery.prototype.getTransactionCount =                 generateFnWithDefaultBlockFor(2, 'eth_getTransactionCount')\nEthQuery.prototype.getStorageAt =                        generateFnWithDefaultBlockFor(3, 'eth_getStorageAt')\nEthQuery.prototype.call =                                generateFnWithDefaultBlockFor(2, 'eth_call')\n// standard\nEthQuery.prototype.protocolVersion =                     generateFnFor('eth_protocolVersion')\nEthQuery.prototype.syncing =                             generateFnFor('eth_syncing')\nEthQuery.prototype.coinbase =                            generateFnFor('eth_coinbase')\nEthQuery.prototype.mining =                              generateFnFor('eth_mining')\nEthQuery.prototype.hashrate =                            generateFnFor('eth_hashrate')\nEthQuery.prototype.gasPrice =                            generateFnFor('eth_gasPrice')\nEthQuery.prototype.accounts =                            generateFnFor('eth_accounts')\nEthQuery.prototype.blockNumber =                         generateFnFor('eth_blockNumber')\nEthQuery.prototype.getBlockTransactionCountByHash =      generateFnFor('eth_getBlockTransactionCountByHash')\nEthQuery.prototype.getBlockTransactionCountByNumber =    generateFnFor('eth_getBlockTransactionCountByNumber')\nEthQuery.prototype.getUncleCountByBlockHash =            generateFnFor('eth_getUncleCountByBlockHash')\nEthQuery.prototype.getUncleCountByBlockNumber =          generateFnFor('eth_getUncleCountByBlockNumber')\nEthQuery.prototype.sign =                                generateFnFor('eth_sign')\nEthQuery.prototype.sendTransaction =                     generateFnFor('eth_sendTransaction')\nEthQuery.prototype.sendRawTransaction =                  generateFnFor('eth_sendRawTransaction')\nEthQuery.prototype.estimateGas =                         generateFnFor('eth_estimateGas')\nEthQuery.prototype.getBlockByHash =                      generateFnFor('eth_getBlockByHash')\nEthQuery.prototype.getBlockByNumber =                    generateFnFor('eth_getBlockByNumber')\nEthQuery.prototype.getTransactionByHash =                generateFnFor('eth_getTransactionByHash')\nEthQuery.prototype.getTransactionByBlockHashAndIndex =   generateFnFor('eth_getTransactionByBlockHashAndIndex')\nEthQuery.prototype.getTransactionByBlockNumberAndIndex = generateFnFor('eth_getTransactionByBlockNumberAndIndex')\nEthQuery.prototype.getTransactionReceipt =               generateFnFor('eth_getTransactionReceipt')\nEthQuery.prototype.getUncleByBlockHashAndIndex =         generateFnFor('eth_getUncleByBlockHashAndIndex')\nEthQuery.prototype.getUncleByBlockNumberAndIndex =       generateFnFor('eth_getUncleByBlockNumberAndIndex')\nEthQuery.prototype.getCompilers =                        generateFnFor('eth_getCompilers')\nEthQuery.prototype.compileLLL =                          generateFnFor('eth_compileLLL')\nEthQuery.prototype.compileSolidity =                     generateFnFor('eth_compileSolidity')\nEthQuery.prototype.compileSerpent =                      generateFnFor('eth_compileSerpent')\nEthQuery.prototype.newFilter =                           generateFnFor('eth_newFilter')\nEthQuery.prototype.newBlockFilter =                      generateFnFor('eth_newBlockFilter')\nEthQuery.prototype.newPendingTransactionFilter =         generateFnFor('eth_newPendingTransactionFilter')\nEthQuery.prototype.uninstallFilter =                     generateFnFor('eth_uninstallFilter')\nEthQuery.prototype.getFilterChanges =                    generateFnFor('eth_getFilterChanges')\nEthQuery.prototype.getFilterLogs =                       generateFnFor('eth_getFilterLogs')\nEthQuery.prototype.getLogs =                             generateFnFor('eth_getLogs')\nEthQuery.prototype.getWork =                             generateFnFor('eth_getWork')\nEthQuery.prototype.submitWork =                          generateFnFor('eth_submitWork')\nEthQuery.prototype.submitHashrate =                      generateFnFor('eth_submitHashrate')\n\n// network level\n\nEthQuery.prototype.sendAsync = function(opts, cb){\n  const self = this\n  self.currentProvider.sendAsync(createPayload(opts), function(err, response){\n    if (!err && response.error) err = new Error('EthQuery - RPC Error - '+response.error.message)\n    if (err) return cb(err)\n    cb(null, response.result)\n  })\n}\n\n// util\n\nfunction generateFnFor(methodName){\n  return function(){\n    const self = this\n    var args = [].slice.call(arguments)\n    var cb = args.pop()\n    self.sendAsync({\n      method: methodName,\n      params: args,\n    }, cb)\n  }\n}\n\nfunction generateFnWithDefaultBlockFor(argCount, methodName){\n  return function(){\n    const self = this\n    var args = [].slice.call(arguments)\n    var cb = args.pop()\n    // set optional default block param\n    if (args.length < argCount) args.push('latest')\n    self.sendAsync({\n      method: methodName,\n      params: args,\n    }, cb)\n  }\n}\n\nfunction createPayload(data){\n  return extend({\n    // defaults\n    id: createRandomId(),\n    jsonrpc: '2.0',\n    params: [],\n    // user-specified\n  }, data)\n}\n","const Mutex = require('async-mutex').Mutex\nconst { createAsyncMiddleware } = require('json-rpc-engine')\nconst createJsonRpcMiddleware = require('eth-json-rpc-middleware/scaffold')\nconst LogFilter = require('./log-filter.js')\nconst BlockFilter = require('./block-filter.js')\nconst TxFilter = require('./tx-filter.js')\nconst { intToHex, hexToInt } = require('./hexUtils')\n\nmodule.exports = createEthFilterMiddleware\n\nfunction createEthFilterMiddleware({ blockTracker, provider }) {\n\n  // create filter collection\n  let filterIndex = 0\n  let filters = {}\n  // create update mutex\n  const mutex = new Mutex()\n  const waitForFree = mutexMiddlewareWrapper({ mutex })\n\n  const middleware = createJsonRpcMiddleware({\n    // install filters\n    eth_newFilter:                   waitForFree(toFilterCreationMiddleware(newLogFilter)),\n    eth_newBlockFilter:              waitForFree(toFilterCreationMiddleware(newBlockFilter)),\n    eth_newPendingTransactionFilter: waitForFree(toFilterCreationMiddleware(newPendingTransactionFilter)),\n    // uninstall filters\n    eth_uninstallFilter:             waitForFree(toAsyncRpcMiddleware(uninstallFilterHandler)),\n    // checking filter changes\n    eth_getFilterChanges:            waitForFree(toAsyncRpcMiddleware(getFilterChanges)),\n    eth_getFilterLogs:               waitForFree(toAsyncRpcMiddleware(getFilterLogs)),\n  })\n\n  // setup filter updating and destroy handler\n  const filterUpdater = async ({ oldBlock, newBlock }) => {\n    if (filters.length === 0) return\n    // lock update reads\n    const releaseLock = await mutex.acquire()\n    try {\n      // process all filters in parallel\n      await Promise.all(objValues(filters).map(async (filter) => {\n        try {\n         await filter.update({ oldBlock, newBlock })\n        } catch (err) {\n          // handle each error individually so filter update errors don't affect other filters\n          console.error(err)\n        }\n      }))\n    } catch (err) {\n      // log error so we don't skip the releaseLock\n      console.error(err)\n    }\n    // unlock update reads\n    releaseLock()\n  }\n\n  // expose filter methods directly\n  middleware.newLogFilter = newLogFilter\n  middleware.newBlockFilter = newBlockFilter\n  middleware.newPendingTransactionFilter = newPendingTransactionFilter\n  middleware.uninstallFilter = uninstallFilterHandler\n  middleware.getFilterChanges = getFilterChanges\n  middleware.getFilterLogs = getFilterLogs\n\n  // expose destroy method for cleanup\n  middleware.destroy = () => {\n    uninstallAllFilters()\n  }\n\n  return middleware\n\n  //\n  // new filters\n  //\n\n  async function newLogFilter(params) {\n    const filter = new LogFilter({ provider, params })\n    const filterIndex = await installFilter(filter)\n    return filter\n  }\n\n  async function newBlockFilter() {\n    const filter = new BlockFilter({ provider })\n    const filterIndex = await installFilter(filter)\n    return filter\n  }\n\n  async function newPendingTransactionFilter() {\n    const filter = new TxFilter({ provider })\n    const filterIndex = await installFilter(filter)\n    return filter\n  }\n\n  //\n  // get filter changes\n  //\n\n  async function getFilterChanges(filterIndexHex) {\n    const filterIndex = hexToInt(filterIndexHex)\n    const filter = filters[filterIndex]\n    if (!filter) {\n      throw new Error(`No filter for index \"${filterIndex}\"`)\n    }\n    const results = filter.getChangesAndClear()\n    return results\n  }\n\n  async function getFilterLogs(filterIndexHex) {\n    const filterIndex = hexToInt(filterIndexHex)\n    const filter = filters[filterIndex]\n    if (!filter) {\n      throw new Error(`No filter for index \"${filterIndex}\"`)\n    }\n    // only return results for log filters\n    if (filter.type === 'log') {\n      results = filter.getAllResults()\n    } else {\n      results = []\n    }\n    return results\n  }\n\n\n  //\n  // remove filters\n  //\n\n\n  async function uninstallFilterHandler(filterIndexHex) {\n    // check filter exists\n    const filterIndex = hexToInt(filterIndexHex)\n    const filter = filters[filterIndex]\n    const result = Boolean(filter)\n    // uninstall filter\n    if (result) {\n      await uninstallFilter(filterIndex)\n    }\n    return result\n  }\n\n  //\n  // utils\n  //\n\n  async function installFilter(filter) {\n    const prevFilterCount = objValues(filters).length\n    // install filter\n    const currentBlock = await blockTracker.getLatestBlock()\n    await filter.initialize({ currentBlock })\n    filterIndex++\n    filters[filterIndex] = filter\n    filter.id = filterIndex\n    filter.idHex = intToHex(filterIndex)\n    // update block tracker subs\n    const newFilterCount = objValues(filters).length\n    updateBlockTrackerSubs({ prevFilterCount, newFilterCount })\n    return filterIndex\n  }\n\n  async function uninstallFilter(filterIndex) {\n    const prevFilterCount = objValues(filters).length\n    delete filters[filterIndex]\n    // update block tracker subs\n    const newFilterCount = objValues(filters).length\n    updateBlockTrackerSubs({ prevFilterCount, newFilterCount })\n  }\n\n  async function uninstallAllFilters() {\n    const prevFilterCount = objValues(filters).length\n    filters = {}\n    // update block tracker subs\n    updateBlockTrackerSubs({ prevFilterCount, newFilterCount: 0 })\n  }\n\n  function updateBlockTrackerSubs({ prevFilterCount, newFilterCount }) {\n    // subscribe\n    if (prevFilterCount === 0 && newFilterCount > 0) {\n      blockTracker.on('sync', filterUpdater)\n      return\n    }\n    // unsubscribe\n    if (prevFilterCount > 0 && newFilterCount === 0) {\n      blockTracker.removeListener('sync', filterUpdater)\n      return\n    }\n  }\n\n}\n\n// helper for turning filter constructors into rpc middleware\nfunction toFilterCreationMiddleware(createFilterFn) {\n  return toAsyncRpcMiddleware(async (...args) => {\n    const filter = await createFilterFn(...args)\n    const result = intToHex(filter.id)\n    return result\n  })\n}\n\n// helper for pulling out req.params and setting res.result\nfunction toAsyncRpcMiddleware(asyncFn) {\n  return createAsyncMiddleware(async (req, res) => {\n    const result = await asyncFn.apply(null, req.params)\n    res.result = result\n  })\n}\n\nfunction mutexMiddlewareWrapper({ mutex }) {\n  return (middleware) => {\n    return async (req, res, next, end) => {\n      // wait for mutex available\n      // we can release immediately because\n      // we just need to make sure updates aren't active\n      const releaseLock = await mutex.acquire()\n      releaseLock()\n      middleware(req, res, next, end)\n    }\n  }\n}\n\nfunction objValues(obj, fn){\n  const values = []\n  for (let key in obj) {\n    values.push(obj[key])\n  }\n  return values\n}\n",null,null,"module.exports = stringify\nstringify.default = stringify\nstringify.stable = deterministicStringify\nstringify.stableStringify = deterministicStringify\n\nvar LIMIT_REPLACE_NODE = '[...]'\nvar CIRCULAR_REPLACE_NODE = '[Circular]'\n\nvar arr = []\nvar replacerStack = []\n\nfunction defaultOptions () {\n  return {\n    depthLimit: Number.MAX_SAFE_INTEGER,\n    edgesLimit: Number.MAX_SAFE_INTEGER\n  }\n}\n\n// Regular stringify\nfunction stringify (obj, replacer, spacer, options) {\n  if (typeof options === 'undefined') {\n    options = defaultOptions()\n  }\n\n  decirc(obj, '', 0, [], undefined, 0, options)\n  var res\n  try {\n    if (replacerStack.length === 0) {\n      res = JSON.stringify(obj, replacer, spacer)\n    } else {\n      res = JSON.stringify(obj, replaceGetterValues(replacer), spacer)\n    }\n  } catch (_) {\n    return JSON.stringify('[unable to serialize, circular reference is too complex to analyze]')\n  } finally {\n    while (arr.length !== 0) {\n      var part = arr.pop()\n      if (part.length === 4) {\n        Object.defineProperty(part[0], part[1], part[3])\n      } else {\n        part[0][part[1]] = part[2]\n      }\n    }\n  }\n  return res\n}\n\nfunction setReplace (replace, val, k, parent) {\n  var propertyDescriptor = Object.getOwnPropertyDescriptor(parent, k)\n  if (propertyDescriptor.get !== undefined) {\n    if (propertyDescriptor.configurable) {\n      Object.defineProperty(parent, k, { value: replace })\n      arr.push([parent, k, val, propertyDescriptor])\n    } else {\n      replacerStack.push([val, k, replace])\n    }\n  } else {\n    parent[k] = replace\n    arr.push([parent, k, val])\n  }\n}\n\nfunction decirc (val, k, edgeIndex, stack, parent, depth, options) {\n  depth += 1\n  var i\n  if (typeof val === 'object' && val !== null) {\n    for (i = 0; i < stack.length; i++) {\n      if (stack[i] === val) {\n        setReplace(CIRCULAR_REPLACE_NODE, val, k, parent)\n        return\n      }\n    }\n\n    if (\n      typeof options.depthLimit !== 'undefined' &&\n      depth > options.depthLimit\n    ) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent)\n      return\n    }\n\n    if (\n      typeof options.edgesLimit !== 'undefined' &&\n      edgeIndex + 1 > options.edgesLimit\n    ) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent)\n      return\n    }\n\n    stack.push(val)\n    // Optimize for Arrays. Big arrays could kill the performance otherwise!\n    if (Array.isArray(val)) {\n      for (i = 0; i < val.length; i++) {\n        decirc(val[i], i, i, stack, val, depth, options)\n      }\n    } else {\n      var keys = Object.keys(val)\n      for (i = 0; i < keys.length; i++) {\n        var key = keys[i]\n        decirc(val[key], key, i, stack, val, depth, options)\n      }\n    }\n    stack.pop()\n  }\n}\n\n// Stable-stringify\nfunction compareFunction (a, b) {\n  if (a < b) {\n    return -1\n  }\n  if (a > b) {\n    return 1\n  }\n  return 0\n}\n\nfunction deterministicStringify (obj, replacer, spacer, options) {\n  if (typeof options === 'undefined') {\n    options = defaultOptions()\n  }\n\n  var tmp = deterministicDecirc(obj, '', 0, [], undefined, 0, options) || obj\n  var res\n  try {\n    if (replacerStack.length === 0) {\n      res = JSON.stringify(tmp, replacer, spacer)\n    } else {\n      res = JSON.stringify(tmp, replaceGetterValues(replacer), spacer)\n    }\n  } catch (_) {\n    return JSON.stringify('[unable to serialize, circular reference is too complex to analyze]')\n  } finally {\n    // Ensure that we restore the object as it was.\n    while (arr.length !== 0) {\n      var part = arr.pop()\n      if (part.length === 4) {\n        Object.defineProperty(part[0], part[1], part[3])\n      } else {\n        part[0][part[1]] = part[2]\n      }\n    }\n  }\n  return res\n}\n\nfunction deterministicDecirc (val, k, edgeIndex, stack, parent, depth, options) {\n  depth += 1\n  var i\n  if (typeof val === 'object' && val !== null) {\n    for (i = 0; i < stack.length; i++) {\n      if (stack[i] === val) {\n        setReplace(CIRCULAR_REPLACE_NODE, val, k, parent)\n        return\n      }\n    }\n    try {\n      if (typeof val.toJSON === 'function') {\n        return\n      }\n    } catch (_) {\n      return\n    }\n\n    if (\n      typeof options.depthLimit !== 'undefined' &&\n      depth > options.depthLimit\n    ) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent)\n      return\n    }\n\n    if (\n      typeof options.edgesLimit !== 'undefined' &&\n      edgeIndex + 1 > options.edgesLimit\n    ) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent)\n      return\n    }\n\n    stack.push(val)\n    // Optimize for Arrays. Big arrays could kill the performance otherwise!\n    if (Array.isArray(val)) {\n      for (i = 0; i < val.length; i++) {\n        deterministicDecirc(val[i], i, i, stack, val, depth, options)\n      }\n    } else {\n      // Create a temporary object in the required way\n      var tmp = {}\n      var keys = Object.keys(val).sort(compareFunction)\n      for (i = 0; i < keys.length; i++) {\n        var key = keys[i]\n        deterministicDecirc(val[key], key, i, stack, val, depth, options)\n        tmp[key] = val[key]\n      }\n      if (typeof parent !== 'undefined') {\n        arr.push([parent, k, val])\n        parent[k] = tmp\n      } else {\n        return tmp\n      }\n    }\n    stack.pop()\n  }\n}\n\n// wraps replacer function to handle values we couldn't replace\n// and mark them as replaced value\nfunction replaceGetterValues (replacer) {\n  replacer =\n    typeof replacer !== 'undefined'\n      ? replacer\n      : function (k, v) {\n        return v\n      }\n  return function (key, val) {\n    if (replacerStack.length > 0) {\n      for (var i = 0; i < replacerStack.length; i++) {\n        var part = replacerStack[i]\n        if (part[1] === key && part[0] === val) {\n          val = part[2]\n          replacerStack.splice(i, 1)\n          break\n        }\n      }\n    }\n    return replacer.call(this, key, val)\n  }\n}\n",null,"// for backwards compat\nmodule.exports = require('json-rpc-engine/src/createScaffoldMiddleware')\n","const SafeEventEmitter = require('@metamask/safe-event-emitter').default\nconst createScaffoldMiddleware = require('eth-json-rpc-middleware/scaffold')\nconst { createAsyncMiddleware } = require('json-rpc-engine')\nconst createFilterMiddleware = require('./index.js')\nconst { unsafeRandomBytes, incrementHexInt } = require('./hexUtils.js')\nconst getBlocksForRange = require('./getBlocksForRange.js')\n\nmodule.exports = createSubscriptionMiddleware\n\n\nfunction createSubscriptionMiddleware({ blockTracker, provider }) {\n  // state and utilities for handling subscriptions\n  const subscriptions = {}\n  const filterManager = createFilterMiddleware({ blockTracker, provider })\n\n  // internal flag\n  let isDestroyed = false\n\n  // create subscriptionManager api object\n  const events = new SafeEventEmitter()\n  const middleware = createScaffoldMiddleware({\n    eth_subscribe: createAsyncMiddleware(subscribe),\n    eth_unsubscribe: createAsyncMiddleware(unsubscribe),\n  })\n  middleware.destroy = destroy\n  return { events, middleware }\n\n  async function subscribe(req, res) {\n\n    if (isDestroyed) throw new Error(\n      'SubscriptionManager - attempting to use after destroying'\n    )\n\n    const subscriptionType = req.params[0]\n    // subId is 16 byte hex string\n    const subId = unsafeRandomBytes(16)\n\n    // create sub\n    let sub\n    switch (subscriptionType) {\n      case 'newHeads':\n        sub = createSubNewHeads({ subId })\n        break\n      case 'logs':\n        const filterParams = req.params[1]\n        const filter = await filterManager.newLogFilter(filterParams)\n        sub = createSubFromFilter({ subId, filter })\n        break\n      default:\n        throw new Error(`SubscriptionManager - unsupported subscription type \"${subscriptionType}\"`)\n\n    }\n    subscriptions[subId] = sub\n\n    res.result = subId\n    return\n\n    function createSubNewHeads({ subId }) {\n      const sub = {\n        type: subscriptionType,\n        destroy: async () => {\n          blockTracker.removeListener('sync', sub.update)\n        },\n        update: async ({ oldBlock, newBlock }) => {\n          // for newHeads\n          const toBlock = newBlock\n          const fromBlock = incrementHexInt(oldBlock)\n          const rawBlocks = await getBlocksForRange({ provider, fromBlock, toBlock })\n          const results = rawBlocks.map(normalizeBlock)\n          results.forEach((value) => {\n            _emitSubscriptionResult(subId, value)\n          })\n        }\n      }\n      // check for subscription updates on new block\n      blockTracker.on('sync', sub.update)\n      return sub\n    }\n\n    function createSubFromFilter({ subId, filter }){\n      filter.on('update', result => _emitSubscriptionResult(subId, result))\n      const sub = {\n        type: subscriptionType,\n        destroy: async () => {\n          return await filterManager.uninstallFilter(filter.idHex)\n        },\n      }\n      return sub\n    }\n  }\n\n  async function unsubscribe(req, res) {\n\n    if (isDestroyed) throw new Error(\n      'SubscriptionManager - attempting to use after destroying'\n    )\n\n    const id = req.params[0]\n    const subscription = subscriptions[id]\n    // if missing, return \"false\" to indicate it was not removed\n    if (!subscription) {\n      res.result = false\n      return\n    }\n    // cleanup subscription\n    delete subscriptions[id]\n    await subscription.destroy()\n    res.result = true\n  }\n\n  function _emitSubscriptionResult(filterIdHex, value) {\n    events.emit('notification', {\n      jsonrpc: '2.0',\n      method: 'eth_subscription',\n      params: {\n        subscription: filterIdHex,\n        result: value,\n      },\n    })\n  }\n\n  function destroy () {\n    events.removeAllListeners()\n    for (const id in subscriptions) {\n      subscriptions[id].destroy()\n      delete subscriptions[id]\n    }\n    isDestroyed = true\n  }\n}\n\nfunction normalizeBlock(block) {\n  return {\n    hash: block.hash,\n    parentHash: block.parentHash,\n    sha3Uncles: block.sha3Uncles,\n    miner: block.miner,\n    stateRoot: block.stateRoot,\n    transactionsRoot: block.transactionsRoot,\n    receiptsRoot: block.receiptsRoot,\n    logsBloom: block.logsBloom,\n    difficulty: block.difficulty,\n    number: block.number,\n    gasLimit: block.gasLimit,\n    gasUsed: block.gasUsed,\n    nonce: block.nonce,\n    mixHash: block.mixHash,\n    timestamp: block.timestamp,\n    extraData: block.extraData,\n  }\n}\n"],"sourceRoot":""}